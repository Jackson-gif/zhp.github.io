# 网络&操作系统核心要点




# 1.计算机网络

## 1.1OSI七层模型&TCP/IP四层模型

七层模型：

![](https://image.okzhp.xyz/img/20230228202004.png)

四层模型：

四层模型是对七层模型的精简，也是计算机网络真正采用的模型分层。

包括

应用层：没啥可说的，就是应用层，最顶层。

传输层：负责传输应用层的数据包。

网络层：负责寻址，即发送方到接收方的寻址工作。

数据链路层：负责数字信号和物理二进制信号的转换。

> **各层常见协议：**
> 
> 应用层：Http（超文本传输协议）、Ftp(文件传输协议)、SMTP(邮件传输协议)、DNS（域名解析）、SSH、Telnet
> 
> 传输层：TCP（可靠）、UDP（不可靠）
> 
> 网络层：IP
> 
> 数据链路层：ARP（ip转mac）

## 1.2TCP和UDP

tcp是可靠传输，传输前需要先建立连接，传输效率低，传输形式是字节流，首部开销大（20-60字节），点对点通信。

UDP是不可靠传输，无需建立连接，传输效率高，传输形式是报文，首部开销小（8字节）,支持广播。

**tcp和UDP应用场景？**

tcp用于需要保证数据可靠传输，UDP用于即时通信，如语音、视频、直播等。

HTTP3.0之前基于TCP，之后基于UDP的QUIC协议。

## 1.3TCP如何保证传输可靠

1. 将数据分割为一个个的数据包
2. 通过校验和保证数据的正确性
3. 超时重传机制：接收方收到数据包会回复确认码，没有收到确认码会重新发送数据包
4. 对多个数据包进行排序及去重
5. 流量控制：可以协调发送方和接收方的速率。
6. 拥塞控制：当网络拥堵时，减少数据的发送。

## 1.4TCP三次握手/四次挥手（非常重要）

三次握手：客户端发送有SYN=1和序列码seq=x，服务端收到后回复SYN=1,ACK=x+1和序列码seq=y，客户端收到后回复ACK=y+1，服务端收到后完成三次握手，建立连接。

为什么三次握手？

第一次握手，服务端确认了自身可以接收数据客户端可以发送数据，第二次握手，客户端确认自己和对方收发数据都正常，此时服务端并不知道自己是否成功发送数据以及客户端是否能接收数据，因此，需要客户端进行第三次握手，服务端可以确认双方收发数据都正常，随后建立连接。

四次挥手：客户端发送FIN标志的序列码seq=x，服务端收到后回复一个ACK=1，序列码seq=x+1，随后服务端再次发送FIN标志的序列码seq=y，客户端收到后回复ACK=1，seq=y+1，服务端收到后关闭连接，客户端等待2MSL后若没有收到回复，也关闭连接。

为什么四次挥手？

客户端首先告诉服务端要关闭连接，服务端首先回应收到了这次请求，但此时可能还有些数据没有传输完毕，服务端等待数据传输完毕，向客户端发送关闭连接的请求，客户端收到后回复确认，随后服务端关闭，客户端等待一会若没有数据也进行关闭。



# 2.操作系统

## 2.1宏观认知

操作系统是连接软件和硬件的桥梁，本质上也是一种软件，只不过是最底层的软件，我们编写的软件通过操作系统调用各种硬件和资源。

系统调用？

操作系统运行分为两个状态，分别是用户态和内核态。用户编写的程序通常以用户态的形式运行，用户态下可以访问用户资源数据，但如果需要访问系统级别的资源，就需要切换到内核态，在内核态下完成对资源的访问或调用。

运行的程序中，凡是需要用到系统层面的资源时，都需要通过系统调用的方式向操作系统提出请求，通过操作系统来完成资源的调用。系统调用大致可分为下面几类：

1. 设备管理
2. 文件管理
3. 进程控制、通信
4. 内存管理

## 2.2进程和线程

进程的几种状态：

1. 创建状态
2. 就绪状态
3. 运行状态
4. 阻塞状态
5. 结束状态

## 2.3进程间如何通信

1. 管道/匿名管道
2. 有名管道
3. 消息队列
4. 信号
5. 信号量
6. 共享内存
7. 套接字

## 2.4线程间同步方式

1. **互斥量(Mutex)**：采用互斥对象机制，只有拥有互斥对象的线程才有访问公共资源的权限。因为互斥对象只有一个，所以可以保证公共资源不会被多个线程同时访问。比如 Java 中的 synchronized 关键词和各种 Lock 都是这种机制。
2. **信号量(Semaphore)** ：它允许同一时刻多个线程访问同一资源，但是需要控制同一时刻访问此资源的最大线程数量。
3. **事件(Event)** :Wait/Notify：通过通知操作的方式来保持多线程同步，还可以方便的实现多线程优先级的比较操作

## 2.5进程调度算法

1. 先来先服务
2. 短作业优先
3. 时间片轮转调度算法
4. 多级反馈队列调度算法：综合以上几种算法
5. 优先级调度

## 2.6死锁的必要条件

1. 互斥：资源只可以被一个进程持有
2. 占有并等待：一个进程至少有一个资源并等待别的资源，且该资源被其他进程所持有
3. 非抢占：资源不能被抢占，只能被主动释放
4. 循环等待：多个进程循环等待别的进程的资源

## 2.7内存管理

作用？

负责内存的分配和回收，以及将逻辑地址转换为物理地址。

内存管理的几种方式？

连续分配管理方式：如块式管理。

非连续分配管理方式：如页式管理，段式管理，段页式管理。

## 2.8其他/参考外链

**局部性原理、快表和多级页表、逻辑地址&物理地址、虚拟内存及如何实现、页面置换算法**

> 内容有点多，参考链接：[操作系统常见面试题总结 | JavaGuide(Java面试+学习指南)](https://javaguide.cn/cs-basics/operating-system/operating-system-basic-questions-01.html#cpu-寻址了解吗-为什么需要虚拟地址空间)

